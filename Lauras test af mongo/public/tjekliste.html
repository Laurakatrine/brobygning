<!DOCTYPE html>
<html>

<head>
    <title></title>
</head>
<script src="/javascripts/jquery.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script>
    $(document).ready(function() {

        let socket = io.connect('/');

        $(function() {

            $("#navbar").load("navbar.html");
            var username = localStorage.getItem('gruppenavn');

            socket.emit('checkboxCheck', username);

            socket.on('checkboxBack', (data) => {
                var dataObj = JSON.parse(data);
                
                for(var i = 0; i<dataObj.length; i++){
                    
                    if(dataObj[i].checked == true){
                        console.log(dataObj[i].id);
                        var newData = "#"+dataObj[i].id;
                       
                    }
                     console.log(newData);
                    $(newData).prop('checked', true);
                }
                
            });

            if (localStorage.getItem("login") == "false") {
                console.log("im not logged in");

                $('#indhold').hide();
            }
            if (localStorage.getItem("login") == "true") {
                console.log("im already logged in");
                $('#indhold').show();
            }

            if (localStorage.getItem("checkbox") == 1) {
                $("#checkbox1").prop('checked', true);

            }
            
            $("#checks :checkbox").change(function(e){
                if($(this).is(":checked")){
                    
                    var id = this.id;
                    var checked = true;
                    console.log(id);
                    socket.emit('checkbox', username, id, checked);
                } else {
                    var id = this.id;
                    var checked = false;
                    console.log(id);
                    socket.emit('checkbox', username, id, checked);
                }
            })

            /*$('#checkbox1').change(function() {

                if (this.checked) {
                    var checked = true;
                    socket.emit('checkbox', username, checked);
                } else {
                    checked = false;
                    socket.emit('checkbox', username, checked);
                }
            });

            $('#checkbox2').change(function() {
                if (this.checked) {} else {

                }
            });

            $('#checkbox3').change(function() {
                if (this.checked) {
                    console.log("Third one checked");
                } else {

                }
            });*/


        });

    });

</script>

<body>
    <div id="navbar">

    </div>
    <p>
        <div id=indhold>
            <div id="checks">
                <input type="checkbox" id="checkbox1">
                <label for="checkbox1">FÃ¸rste opgave</label><br>
                <input type="checkbox" id="checkbox2">
                <label for="checkbox2">Anden opgave</label><br>
                <input type="checkbox" id="checkbox3">
                <label for="checkbox3">Tredje opgave</label><br>
            </div>


            <p>Det her er tjeklisten</p>
        </div>


    </p>

    <div>



    </div>



</body>

</html>
