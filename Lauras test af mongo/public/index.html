<!DOCTYPE html>
<html>

<head>
    <title></title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        #popup {
            position: absolute;
            top: 50%;
            left: 50%;
            background: #fff;
            width: 500px;
            height: 500px;
            margin-left: -250px;
            /*Half the value of width to center div*/
            margin-top: -250px;
            /*Half the value of height to center div*/
            z-index: 200;
        }
    </style>
</head>
<script src="/javascripts/jquery.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script>
    var username;
    var password;

    $(document).ready(function() {
        
        $("#navbar").load("navbar.html");
        $("#ekstraNav").load("navbarEkstra.html");
        $("footer").load("footer.html");

        var logPress = 0;

        let socket = io.connect('/'); // default namespace for Socket.io


        $('#popup').hide();
        //$('#navbar').show();


        $(function() {

            if (localStorage.getItem("login") == "false") {
                $('#ekstraNav').hide();
                console.log("im not logged in");
            }
            if (localStorage.getItem("login") == "true") {
                $('#loginBtn').hide();
                console.log("im already logged in");
            }

            $('#loginBtn').click(() => {
                if (logPress == 0) {
                    $('#popup').show();
                    logPress = 1;
                } else {
                    console.log("signing off");
                    localStorage.setItem("login", "false");
                    logPress = 0;
                    $('#loginBtn').html('Log ind');
                }
            });

            $('#login').click(() => {


                username = $('#username').val();
                password = $('#pwd').val();

                socket.emit('login', username, password);

            });

            socket.on("logging_in", (data) => {
                //console.log("logging in " + data);
                var dataObj = JSON.parse(data);

                var registreretBrgn = dataObj[0].brugernavn;
                var registreretPswd = dataObj[0].password;

                var registreretBrgn2 = dataObj[1].brugernavn;
                var registreretPswd2 = dataObj[1].password;

                username = $('#username').val();
                password = $('#pwd').val();

                if (((username == registreretBrgn) && (password == registreretPswd)) || ((username == registreretBrgn2) && (password == registreretPswd2))) {
                    console.log("Correct login");
                    localStorage.setItem("login", "true");
                    localStorage.setItem("gruppenavn", username);
                    $('#popup').hide();
                    $('#ekstraNav').show();
                    $('#loginBtn').html('Log ud');
                } else {
                    console.log("WRONG")
                }

            });



        });
    });
</script>

<body>
    <div id="navbar">
    </div>
    <div id="ekstraNav">
    </div>
    
    <div id="popup">
        <div class="popupcontent">
            <h1>Some Popup Content</h1>
            <form>

                <label for="username">Username:</label><br>
                <input type="text" id="username" name="username"><br>
                <label for="pwd">Password:</label><br>
                <input type="password" id="pwd" name="pwd">

                <input id="login" type="button" value="Submit">

            </form>
        </div>
    </div>
    <div>

    </div>

    <div>
        <p align="right"><button type="button" id="loginBtn">Log ind</button> </p>
        <h2 id="notesbog">Notesbog</h2>



    </div>

    <div>


        <p> Notesbogens form√•l Log ind for at bruge Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec pellentesque elit arcu, sed fermentum orci tincidunt nec. In porttitor sodales tempor. Aenean elementum nibh magna, quis eleifend nisi mattis in. Phasellus tristique dictum odio ac gravida. Nullam gravida consectetur ante, nec laoreet felis congue in. Phasellus erat sapien, congue et sodales ac, lobortis vitae sem. In vitae finibus ante. Phasellus ultrices lectus consectetur libero maximus vestibulum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec pellentesque elit arcu, sed fermentum orci tincidunt nec. In porttitor sodales tempor. Aenean elementum nibh magna, quis eleifend nisi mattis in. Phasellus tristique dictum odio ac gravida. Nullam gravida consectetur ante, nec laoreet felis congue in. Phasellus erat sapien, congue et sodale.


        </p>

        <!-- <input type="button" id="signoff" value="Sign off">-->
    </div>



</body>
<footer></footer>

</html>
